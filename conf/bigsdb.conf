#BIGSdb site-specific configuration file
#Set the attributes in this file specific to your system

###GENERAL####

#Location of web accessible temporary directory.
tmp_dir=/var/www/tmp

#Location of web-inaccessible secure temporary directory.
#Beware if your system uses systemd PrivateTmp - this may cause problems if you
#use /var/tmp since apache won't see files created by scripts run as the bigsdb
#user. This will affect the use of manually refreshed BLAST database caches.
#In this case it is better to use a temporary directory outside of /tmp
#or /var/tmp. Alternatively, disable the use of PrivateTmp by apache.
secure_tmp_dir=/var/tmp

#Location of web accessible submission directory.
submission_dir=/var/submissions

#Directory used to contain system lock files
lock_dir=/var/run/lock

#Site administrator E-mail address (optional)
#This is used for site-wide account administration if there are problems.
#site_admin_email=admin@your_domain.com

#Site user databases
#Set name of global user database - this is optional. If this is not used
#then each database will maintain its own set of user details. Usually
#only one database will be specified here, but multiple databases are
#supported (enter a comma-separated list of user databases - each consisting
#of a display name, followed by a pipe character (|) and the name of the 
#database).
#site_user_dbs=PubMLST|pubmlst_bigsdb_users

#Site-wide accounts
#Allow users to request registration (set to 1 to enable).
auto_registration=0
new_account_validation_timeout_mins=60
inactive_account_removal_days=180
;registration_address=https://pubmlst.org/bigsdb

#SMTP server for sending E-mail updates (submissions and offline jobs).
#smtp_server=127.0.0.1
#smtp_port=25
domain=pubmlst.org

#Name of preference database.
prefs_db=bigsdb_prefs

#Name of authentication database.
auth_db=bigsdb_auth

#Web-accessible path to stylesheet.  Needed only for viewing offline content
#generated by plugins such as LocusExplorer.  Default setting will be used
#unless uncommented.
#stylesheet=https://pubmlst.org/css/bigsdb.css

#Relative web paths to scripts - needed by submission system and private to 
#move between the two and if private record uploads is enabled.
curate_script=/cgi-bin/private/bigsdb/bigscurate.pl
query_script=/cgi-bin/bigsdb/bigsdb.pl

#Specify number of days that job files will remain on server.
results_deleted_days=7

#Specify number of days before sequence BLAST database cache is marked stale.
cache_days=7

#Set intranet to '1' if clients are running without an internet connection
#(jQuery and jQuery UI libraries are otherwise downloaded from Google CDN).
#Ensure that the jquery.js and jquery-ui.js libraries are placed in /javascript
#directory. These can be downloaded from:
#http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js
#[rename to jquery.js]
#http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js
#[rename to jquery-ui.js]
intranet=0

#Set no_cdn to '1' to prevent use of the Google CDN to load JQuery libraries.
#This can be blocked in China - you will need to make sure that the jquery
#libraries (jquery.js and jquery-ui.js) are available from the local 
#/javascript directory as described when using intranet=1 (see above).
no_cdn=0

#Disable the 'this site uses cookies' message.
no_cookie_consent=0

#Set disable_updated to '1' to lock the curation interface during server
#maintenance.
disable_updates=0

#Message to display during server maintenance.
#disable_update_message=This server is undergoing maintenance.

#URL root to web-accessible documentation.
doclink=http://bigsdb.readthedocs.io/en/latest

#Maximum file upload size (MB)
max_upload_size=32

#Set PostgreSQL temporary buffers (MB) - likely to be needed if using cgMLST
#schemes. Alternatively this can be set globally in postgresql.conf.
temp_buffers=64

#Force retirement of id when deleting isolate, profile or allele records
delete_retire_only=0

#Admin logging
#Log deletion of isolate records
admin_log=0

###REST INTERFACE###########

#Name of database describing resources for REST interface
rest_db=bigsdb_rest

#Is the REST interface using a PROXY server?
rest_behind_proxy=0

#Hide E-mail addresses of curators in REST interface (sender E-mails are 
#hidden by default)
rest_hide_emails=0

#Set to log all REST calls to the rest_db. You should set a CRON job to remove
#calls older than a specified time, e.g. 7 days, to prevent this log getting
#too big.
rest_log_to_db=0

#The following are just used to colour the dashboard numbers on the REST monitor.
#Numbers will incrementally change from blue to red as they increase. Numbers
#greater than those set below will be the same colour as the max value.
max_rest_hits_per_second_warn=10
max_avg_response_warn=500

###OFFLINE JOB PROCESSING###

#Name of offline job queue database (if you set this you'll also need to run
#bigsjobs.pl from a CRON job frequently). If not set, plugins that rely on
#offline processing will be unavailable.
jobs_db=bigsdb_jobs

#Do not start job if load average (over last minute) is greater than value.
max_load=8

#Do not start web-based tag scanning if load average (over last minute) is 
#greater than value. Set lower than max_load to prevent web scans blocking 
#normal sequence queries (max_load value is used if not set).
#max_load_webscan=6

#Record status of scripts such as the autotagger, autodefiner and cache renewal
#in the jobs database. Set if you want these to be included in the jobs 
#monitor.
record_scripts=0

#Record status of manual web scans in the jobs database. Set if you want these
#to be included in the jobs monitor.
record_scans=0

#The following are just used to colour the dashboard numbers on the job monitor.
#Numbers will incrementally change from blue to red as they increase. Numbers
#greater than those set below will be the same colour as the max value.
max_queued_colour_warn=10
max_running_colour_warn=10

####EMBOSS####
#used for sequence alignment in allele query

emboss_path=/usr/bin

####BLAST+ BIN DIRECTORY
#Path of directory containing BLAST+ binaries (blastn, blastx, tblastx,
#makeblastdb). It is recommended that you use statically-linked binaries
#downloaded from NCBI.

blast+_path=/usr/local/ncbi-blast+/bin

####MAXIMUM NUMBER OF BLAST THREADS
#Do not set to > number of processor cores
blast_threads=1

####MUSCLE#####
#Path of muscle executable and maximum memory it can use (MB)

muscle_path=/usr/bin/muscle
max_muscle_mb=4096

####MAFFT######
#Path of mafft executable
#Must be version 6.840 or higher

mafft_path=/usr/bin/mafft
mafft_threads=1

####IPCRESS####
#Path of ipcress executable

ipcress_path=/usr/bin/ipcress 

####MOGRIFY####
mogrify_path=/usr/bin/mogrify

####SPLITSTREE#
splitstree_path=/usr/bin/splitstree4

####CLUSTALW###
clustalw_path=/usr/bin/clustalw

####BLAT#######
#Only needed if working with eukaryote genomes containing introns
#blat_path=/usr/local/bin/blat

##REFERENCE DB#
#Set to reference dbase name if you have set up a local reference database.
#You will need to run the accompaning getrefs.pl script regularly to
#keep this updated (unless you're mirroring another system)

ref_db=bigsdb_refs

#EXPORT###########
#Threshold for number of records before export job is sent to the offline job
#manager instead of running immediately.
;export_instant_run=2000

#GENOME COMPARATOR
#It is recommended that you use at least 2 threads. It is not currently
#possible to cancel a running job when only a single thread is used.
genome_comparator_limit=1000
genome_comparator_threads=2

#ITOL#############
itol_record_limit=2000
itol_seq_limit=100000

#MICROREACT#######
microreact_record_limit=2000
microreact_seq_limit=100000

#PHYLOVIZ#########
#Enter Phyloviz account details - these need to be registered with PhyloViz
;phyloviz_user=xxxxxxxx
;phyloviz_passwd=xxxxxxxx

#GrapeTree########
#Install GrapeTree from https://github.com/achtman-lab/GrapeTree
#Set location for installation directory 'grapetree_path'.
#Copy MSTree_holder.html to a directory in the website and list its location
#relative to the root of the website 'MSTree_holder_rel_path'.
#The 'static' directory should be a sub-directory of the directory containing
#MSTree_holder.html
;python3_path=/usr/bin/python3
;grapetree_path=/usr/local/GrapeTree
;MSTree_holder_rel_path=/GrapeTree/MSTree_holder.html
grapetree_limit=10000

#GENEPRESENCE#######
genepresence_taxa_limit=10000
genepresence_record_limit=500000
